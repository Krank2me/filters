<mat-card>
  <mat-card-title>Filters</mat-card-title>
  <mat-card-content>
    <form [formGroup]="filterForm">
      <mat-form-field appearance="fill">
        <div class="search-container">
          <ng-container *ngIf="!isSelect">
            <input
              type="text"
              matInput
              [maxlength]="maxlength"
              [minlength]="minlength"
              [min]="min"
              [max]="max"
              formControlName="query"
              [errorStateMatcher]="matcher"
              placeholder="Search"
              (input)="onKeyUp($event.target)"
            />
          </ng-container>

          <ng-container *ngIf="isSelect">
            <mat-label *ngIf="!stateSelected">Seleccione...</mat-label>
            <mat-select
              #matSelect
              formControlName="query"
              class="state-select"
              [(value)]="stateSelected"
              (selectionChange)="onChangeState()"
            >
              <mat-option
                *ngFor="let state of fieldsSelected?.state_list"
                value="{{ state }}"
              >
                {{ state }}
              </mat-option>
            </mat-select>
          </ng-container>

          <mat-select
            class="filter-select"
            [(value)]="filterSelected"
            (selectionChange)="onChange($event)"
          >
            <mat-option *ngFor="let field of fields" value="{{ field?.value }}">
              {{ field.text }}
            </mat-option>
          </mat-select>
          <div class="--icon">
            <mat-icon (click)="search()" *ngIf="showSearch">search</mat-icon>
            <mat-icon (click)="clean()" *ngIf="showClose">close</mat-icon>
            <mat-spinner *ngIf="fetching" [diameter]="24"></mat-spinner>
          </div>
        </div>
        <mat-hint *ngIf="!fieldsSelected">
          Porfavor seleccione un item de la lista...
        </mat-hint>
        <mat-error> {{ getTextError() }}</mat-error>
      </mat-form-field>
    </form>
  </mat-card-content>
</mat-card>
